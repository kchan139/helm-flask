service:
  name: flask-service
  type: ClusterIP

configmap:
  name: app-config
  data:
    DB_HOST: postgres-service

secret:
  name: postgres-secret

ingress:
  name: flask-ingress

monitor:
  endpoints:
    port: http
    path: /metrics
    interval: 15s

hpa:
  name: flask-hpa
  minReplicas: 1
  maxReplicas: 3
  scaleTargetRef:
    apiVersion: apps/v1
    kind: Deployment
  metrics:
    type: Resource
    resource:
      name: cpu
      target:
        type: Utilization
        avgUtilization: 60

deployment:
  name: flask
  port: 5000
  replicas: 1
  image:
    name: localhost/flask-app
    tag: latest
    pullPolicy: Never
  requests:
    cpu: 250m
    mem: 256Mi
  limits:
    cpu: 500m
    mem: 512Mi
  probes:
    liveness:
      path: /alive
      initialDelay: 10
      period: 10
    readiness:
      path: /health
      initialDelay: 5
      period: 5
